<!-- src/main/resources/templates/login.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <title>로그인</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        :root {
            --border:#e5e7eb;
            --muted:#6b7280;
            --bg:#111827;
            --bg-disabled:#9ca3af;
            --ok-bg:#ecfdf5;
            --ok-bd:#10b981;
            --ok-tx:#065f46;
            --err-bg:#fef2f2;
            --err-bd:#ef4444;
            --err-tx:#991b1b;
        }
        * { box-sizing: border-box; }
        body {
            margin: 0;
            font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            background: #fff;
            color: #111827;
        }
        .container { max-width: 520px; margin: 48px auto; padding: 24px; }
        .card {
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .title { margin: 0 0 16px; text-align: center; font-size: 22px; }
        .row { display: flex; flex-direction: column; gap: 6px; margin-bottom: 14px; }
        label { font-weight: 600; }
        input, button, a.btn {
            padding: 10px 12px;
            border: 1px solid #d1d5db;
            border-radius: 10px;
            font-size: 14px;
        }
        input[type="email"], input[type="password"] { width: 100%; }
        button, a.btn {
            background: var(--bg);
            color: #fff;
            cursor: pointer;
            border: none;
            text-align: center;
        }
        button:disabled { background: var(--bg-disabled); cursor: not-allowed; }
        .sub {
            display: flex; justify-content: space-between; align-items: center; margin-top: 6px;
        }
        .muted { color: var(--muted); font-size: 12px; }
        .alert { margin-bottom: 16px; padding: 10px 12px; border-radius: 10px; }
        .alert.err { background: var(--err-bg); color: var(--err-tx); border: 1px solid var(--err-bd); }
        .alert.ok  { background: var(--ok-bg);  color: var(--ok-tx);  border: 1px solid var(--ok-bd); }
        .links { margin-top: 8px; text-align: center; }
        .links a { color: #2563eb; text-decoration: none; }
        .links a:hover { text-decoration: underline; }
        .custom-link {
            color: #333333 !important;  /* 진한 회색 */
            text-decoration: none;      /* 기본 밑줄 제거 */
            font-size: 0.67em;          /* 글자 크기 2/3 */
        }
        .custom-link:hover {
            text-decoration: underline; /* hover 시 밑줄 표시 */
        }
    </style>
</head>
<body>
<div class="container">
    <!-- 파라미터 기반 메시지 (에러/로그아웃) -->
    <div th:if="${param.error}" class="alert err">이메일 또는 비밀번호가 올바르지 않습니다.</div>
    <div th:if="${param.logout}" class="alert ok">로그아웃되었습니다.</div>
    <div th:if="${param.signupSuccess}" class="alert ok">회원가입이 완료되었습니다. 로그인 해주세요.</div>

    <div class="card">
        <h2 class="title">로그인</h2>

        <form th:action="@{/api/auth/login}" method="post" autocomplete="on">
            <div class="row">
                <label for="email">이메일</label>
                <input id="email" type="email" name="email" required placeholder="you@example.com" autofocus>
            </div>

            <div class="row">
                <label for="password">비밀번호</label>
                <input id="password" type="password" name="password" required placeholder="••••••••">
                <div class="sub">
                    <span class="muted">보안을 위해 공용 PC에서는 자동 로그인을 사용하지 마세요.</span>
                </div>
            </div>

            <!-- CSRF (스프링 시큐리티 폼 로그인용 히든 필드) -->
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">

            <button type="submit" style="width:100%; margin-top: 6px;">로그인</button>
        </form>

        <div class="links" style="margin-top:12px;">
            <a class="custom-link" th:href="@{/signup}">회원가입</a>
        </div>
    </div>
</div>
</body>
</html>